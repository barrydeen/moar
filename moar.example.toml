domain = "localhost"
port = 8080
# Hex pubkey of the admin â€” only this key can log into the admin UI
admin_pubkey = "your-hex-pubkey-here"
# Directory for custom relay home pages (default: "pages")
# Place {relay_id}.html files here, or edit via the admin UI
pages_dir = "pages"

# DM Relay - Anyone can write if tagging your pubkey, only you can read
[relays.dms]
name = "DM Relay"
description = "Private direct messages"
subdomain = "dm"
db_path = "data/dm.mdb"

[relays.dms.policy.write]
require_auth = false
# Events must tag one of these pubkeys to be accepted
tagged_pubkeys = ["npub1..."]

[relays.dms.policy.read]
require_auth = true
allowed_pubkeys = ["npub1..."]

[relays.dms.policy.events]
allowed_kinds = [
    4,
    1059,
    5,
]

# Inbox Relay - Anyone can write if tagging your pubkey, open read
[relays.inbox]
name = "Inbox"
description = "Receive mentions and replies"
subdomain = "inbox"
db_path = "data/inbox.mdb"

[relays.inbox.policy.write]
tagged_pubkeys = ["npub1..."]

[relays.inbox.policy.read]

[relays.inbox.policy.events]

# Public Relay - Open to everyone
[relays.public]
name = "Public Relay"
description = "A fully open relay"
subdomain = "www"
db_path = "data/public.mdb"

[relays.public.policy.write]
require_auth = false

[relays.public.policy.read]
require_auth = false

[relays.public.policy.events]

# Outbox Relay - Public read, whitelisted write
[relays.outbox]
name = "My Outbox"
description = "Only I can post here"
subdomain = "outbox"
db_path = "data/outbox.mdb"

[relays.outbox.policy.write]
require_auth = false
allowed_pubkeys = ["npub1..."]

[relays.outbox.policy.read]
require_auth = false

[relays.outbox.policy.events]

# ===== Blossom Media Servers =====

# Media Server - Public media storage
[blossoms.media]
name = "Media Server"
description = "Public media storage"
subdomain = "media"
storage_path = "data/blossom/media"

[blossoms.media.policy]
max_file_size = 104857600  # 100MB

[blossoms.media.policy.upload]
allowed_pubkeys = ["your-hex-pubkey-here"]

[blossoms.media.policy.list]
require_auth = false
